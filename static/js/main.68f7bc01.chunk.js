(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{22:function(e,t,a){e.exports=a.p+"static/media/logo.8f7611ae.svg"},24:function(e,t,a){e.exports=a.p+"static/media/edit_large_icon.d476a8b8.svg"},25:function(e,t,a){e.exports=a.p+"static/media/success_tooltip.e38b395c.svg"},26:function(e,t,a){e.exports=a.p+"static/media/error_tooltip.4072126c.svg"},29:function(e,t,a){e.exports=a(40)},34:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),s=a(6),i=(a(34),a(27)),l=a(8),u=a(1),m=a(2),p=r.a.createContext(),d=a(22),_=a.n(d);var f=function(e){var t=e.email,a=e.loggedIn,n=e.onSignOut,c=Object(m.h)();return r.a.createElement("header",{className:"header"},r.a.createElement("img",{src:_.a,alt:"Logo",className:"header__logo"}),a?r.a.createElement("ul",{className:"header__menu-items"},r.a.createElement("li",{className:"header__menu-item header__nav-text_email"},t),r.a.createElement("li",{className:"header__menu-item header__nav-text"},r.a.createElement("button",{className:"header__nav-text header__nav-text_muted",onClick:n},"Log out"))):r.a.createElement(s.b,{className:"header__nav-text",to:"/signin"===c.pathname?"/signup":"/signin"},"/signin"===c.pathname?"Sign up":"Sign in"))},h=a(28);var b=function(e){var t=e.component,a=Object(h.a)(e,["component"]);return r.a.createElement(m.b,null,(function(){return a.loggedIn?r.a.createElement(t,a):r.a.createElement(m.a,{to:"/signin"})}))},v=a(24),g=a.n(v);var E=function(e){var t=e.card,a=e.onCardDelete,n=e.onCardClick,c=e.onCardLike,o=r.a.useContext(p),s=t.name,i=t.link,l=t.likes,u=t.owner,m=o._id===u._id,d=l.some((function(e){return e._id===o._id}));return r.a.createElement("li",{className:"card"},r.a.createElement("img",{className:"card__image",alt:"Pic: ".concat(s),src:i,onClick:function(){n(t)}}),r.a.createElement("div",{className:"card__text-container"},r.a.createElement("p",{className:"card__text"},s),r.a.createElement("div",{className:"card__likes-container"},r.a.createElement("button",{className:"button button_like ".concat(d&&"button_like-black"),onClick:function(){c(t)}}),r.a.createElement("p",{className:"card__likes-text"},l.length))),m&&r.a.createElement("button",{className:"button button_delete",onClick:function(){a(t)}}))};var N=function(e){var t=e.cards,a=e.onCardLike,n=e.onCardDelete,c=e.onCardClick,o=e.onEditProfile,s=e.onEditAvatar,i=e.onAddPlace,l=r.a.useContext(p),u=l.name,m=l.about,d=l.avatar;return r.a.createElement("main",null,r.a.createElement("section",{className:"profile"},r.a.createElement("div",{className:"profile__avatar-container"},r.a.createElement("img",{alt:"Avatar Pic",className:"profile__avatar",src:d}),r.a.createElement("div",{className:"profile__avatar-edit",onClick:s},r.a.createElement("img",{src:g.a,alt:""}))),r.a.createElement("div",{className:"profile__text-container"},r.a.createElement("h1",{className:"profile__name"},u),r.a.createElement("button",{className:"button button_edit",onClick:o}),r.a.createElement("p",{className:"profile__description"},m)),r.a.createElement("button",{className:"button button_add",onClick:i})),r.a.createElement("section",{className:"elements"},r.a.createElement("ul",{className:"cards"},t.map((function(e){return r.a.createElement(E,{card:e,onCardDelete:n,onCardClick:c,onCardLike:a,key:e._id})})))))};var O=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__text"},"\xa9 2020 Around The U.S."))};var C=function(e){var t=e.card,a=e.onClose,n=e.isOpen,c=t.name,o=t.link;return r.a.createElement("div",{className:"popup popup_image ".concat(n&&"popup_is-opened")},r.a.createElement("div",{className:"popup__container"},r.a.createElement("img",{className:"popup__image",alt:c,src:o}),r.a.createElement("h2",{className:"popup__image-title"},c),r.a.createElement("button",{className:"button button_close",onClick:a})))};var k=function(e){var t=e.name,a=e.title,n=e.buttonText,c=e.children,o=e.isOpen,s=e.onClose,i=e.onSubmit;return r.a.createElement("div",{className:"popup popup_type_".concat(t," ").concat(o&&"popup_is-opened")},r.a.createElement("div",{className:"popup__container popup__container_form"},r.a.createElement("form",{className:"popup__form",name:t,onSubmit:i,noValidate:!0},r.a.createElement("h2",{className:"popup__title"},a),c,r.a.createElement("button",{type:"submit",className:"button button_save popup__input"},n)),r.a.createElement("button",{className:"button button_close",onClick:s})))};var j=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateUser,c=r.a.useContext(p),o=r.a.useState(""),s=Object(u.a)(o,2),i=s[0],l=s[1],m=r.a.useState(""),d=Object(u.a)(m,2),_=d[0],f=d[1];return r.a.useEffect((function(){l(c.name),f(c.about)}),[c]),r.a.createElement(k,{name:"edit-profile",title:"Edit Profile",buttonText:"Save",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({name:i,description:_})},children:r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"popup__field"},r.a.createElement("input",{type:"text",className:"popup__input popup__input_name",placeholder:"Edit Name",minLength:"2",maxLength:"40",pattern:"[A-Za-z -]+",required:!0,id:"name-input",value:i||"",onChange:function(e){return l(e.target.value)}}),r.a.createElement("span",{id:"name-input-error",className:"popup__input-error"})),r.a.createElement("label",{className:"popup__field"},r.a.createElement("input",{type:"text",className:"popup__input popup__input_desc",placeholder:"Edit Job",minLength:"2",maxLength:"200",required:!0,id:"desc-input",value:_||"",onChange:function(e){return f(e.target.value)}}),r.a.createElement("span",{className:"popup__input-error",id:"desc-input-error"})))})};var S=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateAvatar,c=r.a.useRef();return r.a.createElement(k,{name:"edit-avatar",title:"Change Profile Picture",buttonText:"Save",isOpen:t,onClose:a,children:r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"popup__field"},r.a.createElement("input",{type:"url",className:"popup__input popup__input_avatar",placeholder:"Avatar Link",required:!0,id:"avatar-input",ref:c}),r.a.createElement("span",{id:"avatar-input-error",className:"popup__input-error"}))),onSubmit:function(e){e.preventDefault(),n({avatar:c.current.value})}})};var y=function(e){var t=e.isOpen,a=e.onClose,n=e.onAddPlace,c=r.a.useRef(),o=r.a.useRef();return r.a.createElement(k,{name:"new-place",title:"New Place",buttonText:"Save",isOpen:t,onClose:a,children:r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"popup__field"},r.a.createElement("input",{type:"text",className:"popup__input popup__input_name",placeholder:"Title",minLength:"1",maxLength:"30",required:!0,id:"title-input",ref:c}),r.a.createElement("span",{className:"popup__input-error",id:"title-input-error"})),r.a.createElement("label",{className:"popup__field"},r.a.createElement("input",{type:"url",className:"popup__input popup__input_link",placeholder:"Image Link",required:!0,id:"link-input",ref:o}),r.a.createElement("span",{className:"popup__input-error",id:"link-input-error"}))),onSubmit:function(e){e.preventDefault(),n({name:c.current.value,link:o.current.value})}})};var U=function(e){var t=e.onLogin,a=Object(n.useState)(""),c=Object(u.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)(""),m=Object(u.a)(l,2),p=m[0],d=m[1];return r.a.createElement("div",{className:"form"},r.a.createElement("form",{className:"form__container",onSubmit:function(e){e.preventDefault(),t({email:o,password:p})}},r.a.createElement("h1",{className:"form__title"},"Log in"),r.a.createElement("input",{className:"form__input",type:"email",value:o,onChange:function(e){return i(e.target.value)},placeholder:"Email"}),r.a.createElement("input",{className:"form__input",type:"password",value:p,onChange:function(e){return d(e.target.value)},placeholder:"Password"}),r.a.createElement("button",{type:"submit",className:"form__submit"},"Log in"),r.a.createElement(s.b,{className:"form__link",to:"/signup"},"Not a member yet? Sign up here!")))};var x=function(e){var t=e.onRegister,a=Object(n.useState)(""),c=Object(u.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)(""),m=Object(u.a)(l,2),p=m[0],d=m[1];return r.a.createElement("div",{className:"form",onSubmit:function(e){e.preventDefault(),t({email:o,password:p})}},r.a.createElement("form",{className:"form__container"},r.a.createElement("h1",{className:"form__title"},"Sign up"),r.a.createElement("input",{className:"form__input",type:"email",value:o,placeholder:"Email",onChange:function(e){return i(e.target.value)}}),r.a.createElement("input",{className:"form__input",type:"password",placeholder:"Password",value:p,onChange:function(e){return d(e.target.value)}}),r.a.createElement("button",{type:"submit",className:"form__submit"},"Sign up"),r.a.createElement(s.b,{className:"form__link",to:"/signin"},"Already a member yet? Log in here!")))},P=a(25),D=a.n(P),L=a(26),A=a.n(L);var w=function(e){var t,a,n,c=e.isOpen,o=e.onClose;switch(e.type){case"success":t=D.a,a="Pic: success",n="Success! You have now been registered.";break;default:t=A.a,a="Pic: error",n="Oops, something went wrong! Please try again."}return r.a.createElement("div",{className:"popup ".concat(c&&"popup_is-opened")},r.a.createElement("div",{className:"popup__container popup__container_form popup__container_tooltip"},r.a.createElement("img",{src:t,alt:a}),r.a.createElement("p",{className:"popup__text"},n),r.a.createElement("button",{className:"button button_close",onClick:o})))},I=a(13),R=a(14),T=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(I.a)(this,e),this.baseUrl=a,this.headers=n}return Object(R.a)(e,[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers}).then((function(t){return e._getResponseData(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers}).then((function(t){return e._getResponseData(t)}))}},{key:"setUserInfo",value:function(e){var t=this,a=e.name,n=e.about;return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:a,about:n})}).then((function(e){return t._getResponseData(e)}))}},{key:"setUserAvatar",value:function(e){var t=this,a=e.avatar;return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:a})}).then((function(e){return t._getResponseData(e)}))}},{key:"addCard",value:function(e){var t=this,a=e.name,n=e.link;return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers,method:"POST",body:JSON.stringify({name:a,link:n})}).then((function(e){return t._getResponseData(e)}))}},{key:"removeCard",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/").concat(e),{headers:this.headers,method:"DELETE"}).then((function(e){return t._getResponseData(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){var a=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{headers:this.headers,method:t}).then((function(e){return a._getResponseData(e)}))}},{key:"getAppInfo",value:function(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-1",headers:{Authorization:"02dcf3f3-4313-4731-b00a-f80d0e88b6bf","Content-Type":"application/json"}}),J=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(I.a)(this,e),this._baseUrl=a,this._headers=n}return Object(R.a)(e,[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"registerUser",value:function(e){return fetch("".concat(this._baseUrl,"/signup"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._getResponseData)}},{key:"signInUser",value:function(e){return fetch("".concat(this._baseUrl,"/signin"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._getResponseData)}},{key:"validateUser",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{headers:Object(l.a)(Object(l.a)({},this._headers),{},{Authorization:"Bearer ".concat(e)})}).then(this._getResponseData)}}]),e}())({baseUrl:"https://register.nomoreparties.co",headers:{"Content-Type":"application/json"}});var q=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),s=Object(u.a)(o,2),d=s[0],_=s[1],h=Object(n.useState)(!1),v=Object(u.a)(h,2),g=v[0],E=v[1],k=Object(n.useState)(!1),P=Object(u.a)(k,2),D=P[0],L=P[1],A=Object(n.useState)(!1),I=Object(u.a)(A,2),R=I[0],q=I[1],z=Object(n.useState)(!1),F=Object(u.a)(z,2),B=F[0],H=F[1],M=Object(n.useState)({}),V=Object(u.a)(M,2),Y=V[0],Z=V[1],G=Object(n.useState)({}),K=Object(u.a)(G,2),Q=K[0],W=K[1],X=Object(n.useState)([]),$=Object(u.a)(X,2),ee=$[0],te=$[1],ae=Object(n.useState)(!1),ne=Object(u.a)(ae,2),re=ne[0],ce=ne[1],oe=Object(n.useState)(""),se=Object(u.a)(oe,2),ie=se[0],le=se[1],ue=Object(m.g)();Object(n.useEffect)((function(){T.getAppInfo().then((function(e){var t=Object(u.a)(e,2),a=t[0],n=t[1];W(n),te(a)})).catch((function(e){console.log(e)}));var e=localStorage.getItem("jwt");e&&me(e)}),[]);var me=function(e){J.validateUser(e).then((function(e){ce(!0),le(e.data.email),ue.push("/")})).catch((function(e){return console.log(e)}))},pe=function(){H(!0)},de=function(){E(!1),c(!1),_(!1),L(!1),Z({}),q(!1),H(!1)},_e=function(e){J.signInUser(e).then((function(e){var t=e.token;localStorage.setItem("jwt",t),me(t)})).catch((function(e){pe(),console.log(e)}))};return r.a.createElement(p.Provider,{value:Q},r.a.createElement(f,{email:ie,loggedIn:re,onSignOut:function(){localStorage.removeItem("jwt"),ce(!1),le(""),ue.push("/signin")}}),r.a.createElement(m.d,null,r.a.createElement(b,{component:N,exact:!0,path:"/",loggedIn:re,cards:ee,onCardClick:function(e){L(!0),Z(e)},onCardDelete:function(e){T.removeCard(e._id).then((function(t){var a=ee.filter((function(t){return t._id!==e._id}));te(a)})).catch((function(e){return console.log(e)}))},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===Q._id}));T.changeLikeCardStatus(e._id,t?"DELETE":"PUT").then((function(t){var a=ee.map((function(a){return a._id===e._id?t:a}));te(a)})).catch((function(e){return console.log(e)}))},onEditProfile:function(){c(!0)},onEditAvatar:function(){E(!0)},onAddPlace:function(){_(!0)}}),r.a.createElement(m.b,{path:"/signin"},r.a.createElement(U,{onLogin:_e})),r.a.createElement(m.b,{path:"/signup"},r.a.createElement(x,{onRegister:function(e){J.registerUser(e).then((function(){ue.push("/signin"),_e(e),q(!0)})).catch((function(e){pe(),console.log(e)}))}})),r.a.createElement(m.b,null,r.a.createElement(m.a,{to:re?"/":"/signin"}))),re&&r.a.createElement(O,null),r.a.createElement(j,{isOpen:a,onClose:de,onUpdateUser:function(e){var t=e.name,a=e.description;T.setUserInfo({currentUser:Q,name:t,about:a}).then((function(e){W(Object(l.a)(Object(l.a)({},Q),{},{name:e.name,about:e.about})),de()})).catch((function(e){console.log(e)}))}}),r.a.createElement(S,{isOpen:g,onClose:de,onUpdateAvatar:function(e){var t=e.avatar;T.setUserAvatar({avatar:t}).then((function(e){W(Object(l.a)(Object(l.a)({},Q),{},{avatar:e.avatar})),de()})).catch((function(e){console.log(e)}))}}),r.a.createElement(y,{isOpen:d,onClose:de,onAddPlace:function(e){var t=e.name,a=e.link;T.addCard({name:t,link:a}).then((function(e){te([].concat(Object(i.a)(ee),[e])),de()})).catch((function(e){console.log(e)}))}}),r.a.createElement(C,{card:Y,isOpen:D,onClose:de}),r.a.createElement(w,{type:"success",isOpen:R,onClose:de}),r.a.createElement(w,{type:"error",isOpen:B,onClose:de}))};o.a.render(r.a.createElement(s.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(q,null))),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.68f7bc01.chunk.js.map